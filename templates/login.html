<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Next-Gen Employee Login | Company Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />

    <style>
      :root{
        /* Brand */
        --primary:#2563eb;           /* blue-600 */
        --primary-700:#1d4ed8;       /* blue-700 */
        --teal:#14b8a6;              /* teal-500 */
        --violet:#7c3aed;            /* violet-600 */
        --slate-900:#0b1220;         /* page bg */
        --ink:#0f172a;               /* text-dark */
        --muted:#64748b;             /* text-muted */
        --card:#0b1326aa;            /* glass */
        --border:#1f2a44;            /* card border */
        --ring:rgba(37,99,235,.18);  /* focus */
        --success:#10b981;           /* green */
        --error:#ef4444;             /* red */
        --warning:#f59e0b;           /* amber */

        /* Depth & radii */
        --radius:18px; --radius-lg:22px; --shadow-1: 0 10px 30px rgba(2,6,23,.40), 0 20px 50px -20px rgba(2,6,23,.60);

        /* Grid */
        --grid-line: rgba(255,255,255,.06);
        --vignette: rgba(0,0,0,.44);
      }

      *{box-sizing:border-box; margin:0; padding:0}
      html,body{height:100%}
      body{
        font-family:'Inter',system-ui,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
        color:#e6eef8;
        background: radial-gradient(1200px 800px at 50% -10%, rgba(37,99,235,.18), transparent 60%),
                    radial-gradient(1000px 800px at 90% 110%, rgba(124,58,237,.16), transparent 62%),
                    linear-gradient(180deg,#0b1220 0%, #0b1220 60%, #0b1324 100%);
        overflow-x:hidden;
        line-height:1.5;
      }

      /* === Scene layers (behind everything) === */
      .scene{position:fixed; inset:0; z-index:-1; overflow:hidden}
      #orb-canvas{position:absolute; inset:0; width:100%; height:100%; display:block}
      .grid-overlay{position:absolute; inset:-2px;
        background:
          repeating-linear-gradient(90deg, var(--grid-line) 0 1px, transparent 1px 80px),
          repeating-linear-gradient(0deg,  var(--grid-line) 0 1px, transparent 1px 80px);
        mask-image: radial-gradient(1100px 800px at 50% 35%, #000 60%, transparent 90%);
        animation: gridShift 30s linear infinite;
        pointer-events:none;
      }
      .vignette{position:absolute; inset:0; background:radial-gradient(1200px 800px at 50% 40%, transparent 60%, var(--vignette) 100%); pointer-events:none}
      @keyframes gridShift{0%{background-position:0 0,0 0}100%{background-position:160px 0,0 160px}}

      /* === Page shell === */
      .shell{
        position:relative;
        min-height:100svh;
        display:grid;
        grid-template-columns: 1.15fr .85fr;
        gap:24px;
        width:min(1140px, 94vw);
        margin-inline:auto;
        padding: clamp(20px, 4vw, 48px) 0 80px;
        perspective: 1200px;
      }

      /* Left: form card (glass, 3D tilt) */
      .card{
        background: linear-gradient(180deg, rgba(12,18,35,.75), rgba(12,18,35,.68));
        backdrop-filter: blur(14px) saturate(1.2);
        border:1px solid rgba(255,255,255,.08);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-1);
        padding: clamp(24px, 3.2vw, 40px);
        transform-style: preserve-3d;
        transform: rotateX(0) rotateY(0);
        transition: transform .2s ease-out, box-shadow .2s ease-out;
        position:relative;
        overflow:hidden;
      }
      .card:before{
        /* aurora sweep */
        content:""; position:absolute; inset:-40%;
        background: conic-gradient(from 180deg at 50% 50%,
                    rgba(37,99,235,.0) 0deg,
                    rgba(37,99,235,.15) 60deg,
                    rgba(20,184,166,.12) 120deg,
                    rgba(124,58,237,.14) 180deg,
                    rgba(37,99,235,.0) 360deg);
        filter: blur(60px);
        transform: translateZ(-1px) rotate(0deg);
        animation: spin 24s linear infinite;
        pointer-events:none;
      }
      @keyframes spin{to{transform: translateZ(-1px) rotate(360deg)}}

      .logo-row{display:flex; align-items:center; gap:12px; margin-bottom:18px}
      .brand-logo{width:40px; height:40px; border-radius:10px; background:radial-gradient(closest-side,#2563eb, #1d4ed8); display:grid; place-items:center; box-shadow: 0 6px 18px rgba(37,99,235,.45)}
      .brand-logo svg{width:22px; height:22px; fill:white}
      .product{font-weight:700; letter-spacing:.2px}

      .title{font-size:clamp(26px, 3.4vw, 34px); font-weight:800; margin: 4px 0 8px}
      .subtitle{color:#a6b3c5; font-weight:400; margin-bottom:26px}

      .form{display:grid; gap:16px}
      .group{position:relative}
      .field{
        width:100%; height:52px; padding: 14px 46px 14px 46px;
        color:#e9f0fb; background: rgba(255,255,255,.04);
        border:1px solid rgba(255,255,255,.10);
        border-radius:12px; outline:none;
        transition:border .2s, box-shadow .2s, background .2s;
      }
      .field::placeholder{color:#8ea0b9}
      .field:focus{
        border-color: rgba(37,99,235,.55);
        box-shadow:0 0 0 4px rgba(37,99,235,.18);
        background: rgba(255,255,255,.06);
      }
      .icon{position:absolute; left:14px; top:50%; translate:0 -50%; opacity:.72}
      .icon svg{width:18px; height:18px; fill:#c0cbe0}

      .peek{position:absolute; right:10px; top:50%; translate:0 -50%;
        border:0; background:transparent; color:#cfe0ff; cursor:pointer; padding:6px; border-radius:8px}
      .peek:hover{background:rgba(255,255,255,.06)}

      .hint-row{display:flex; align-items:center; justify-content:space-between; color:#9fb1c9; font-size:12px; min-height:18px}
      .caps{display:none; color:var(--warning)}

      .strength{height:6px; background:#1c2337; border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.06)}
      .bar{height:100%; width:0%; background:linear-gradient(90deg, #ef4444, #f59e0b, #10b981); transition:width .25s ease}

      /* CTA reveals only when both fields valid */
      .cta-wrap{display:none; transform: translateY(6px);}
      .cta{
        width:100%; height:52px; border:0; border-radius:12px; cursor:pointer; color:#fff; font-weight:700;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-700) 100%);
        box-shadow: 0 10px 22px rgba(37,99,235,.45);
        transition: transform .15s ease, box-shadow .2s ease;
      }
      .cta:hover{transform: translateY(-2px); box-shadow: 0 14px 26px rgba(37,99,235,.55)}
      .cta:active{transform: translateY(0)}

      .legal{color:#8ca0bf; font-size:12px; margin-top:14px}

      /* Success state overlay */
      .success-overlay{position:absolute; inset:0; display:none; place-items:center; background:rgba(5,10,20,.66); backdrop-filter: blur(6px)}
      .check{width:92px; height:92px; border-radius:999px; border:3px solid rgba(16,185,129,.35); display:grid; place-items:center; animation: pop .5s ease}
      .check svg{width:44px; height:44px; stroke:#10b981; stroke-width:3; fill:none; stroke-linecap:round; stroke-linejoin:round}
      @keyframes pop{0%{transform:scale(.8); opacity:0}100%{transform:scale(1); opacity:1}}

      /* Right: hero / 3D scene */
      .hero{
        position:relative; border-radius: var(--radius-lg);
        overflow:hidden; isolation:isolate; min-height: 560px;
        background:
          radial-gradient(900px 600px at 20% 0%, rgba(20,184,166,.18), transparent 60%),
          radial-gradient(900px 700px at 120% 100%, rgba(37,99,235,.22), transparent 60%),
          linear-gradient(180deg, rgba(12,18,35,.70), rgba(12,18,35,.60));
        border:1px solid rgba(255,255,255,.08);
        box-shadow: var(--shadow-1);
      }

      .orbit{
        --s: 280px; position:absolute; inset:0; display:grid; place-items:center;
      }
      .planet{width: var(--s); height: var(--s); border-radius:50%;
        background: radial-gradient(circle at 35% 30%, #c9d6ff 0%, #8ea0ff 28%, #4b6bff 58%, #1d34a6 100%);
        filter: drop-shadow(0 40px 70px rgba(41,89,255,.3));
        animation: bob 6s ease-in-out infinite;
      }
      .ring{position:absolute; width: calc(var(--s) * 1.4); height: calc(var(--s) * .38); border-radius:50%;
        border: 2px dashed rgba(255,255,255,.28); transform: rotateX(70deg) rotateZ(-10deg);
        animation: spin 18s linear infinite;
      }
      .spark{position:absolute; width:10px; height:10px; border-radius:999px; background: #a5b4fc; box-shadow:0 0 20px #93c5fdAA}
      .spark:nth-child(1){top:18%; left:12%}
      .spark:nth-child(2){bottom:22%; right:16%}
      .spark:nth-child(3){top:42%; right:8%}

      @keyframes bob{0%,100%{transform: translateY(0)}50%{transform: translateY(-12px)}}

      .hero-copy{position:absolute; inset:auto 0 0 0; padding: 24px 22px 22px 22px; background: linear-gradient(180deg, transparent, rgba(4,10,22,.72) 36%, rgba(4,10,22,.86));}
      .hero-copy h2{font-size: clamp(18px, 2.2vw, 24px); font-weight:800}
      .hero-copy p{color:#b2c2da; margin-top:6px; font-size:14px}

      /* Footer features (scroll reveal) */
      .features{margin-top: 32px; display:grid; grid-template-columns: repeat(3, 1fr); gap:14px}
      .feat{
        background: linear-gradient(180deg, rgba(12,18,35,.65), rgba(12,18,35,.58));
        border:1px solid rgba(255,255,255,.08);
        border-radius:16px; padding:14px 16px; min-height:108px;
        transform: translateY(16px); opacity:0; transition: transform .5s cubic-bezier(.2,.7,.2,1), opacity .5s ease;
      }
      .feat.revealed{transform: translateY(0); opacity:1}
      .feat h3{font-size:15px; font-weight:700; margin-bottom:6px}
      .feat p{font-size:13px; color:#a8bad4}

      /* Utility */
      .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

      /* Responsive */
      @media (max-width: 980px){
        .shell{grid-template-columns: 1fr; padding: 24px 0 64px}
        .hero{display:none}
      }

      /* Respect reduced motion */
      @media (prefers-reduced-motion: reduce){
        .grid-overlay{animation:none}
        .planet,.ring{animation:none}
      }
    </style>
  </head>

  <body>
    <!-- Scene: canvas particles + grid overlay + vignette -->
    <div class="scene" aria-hidden="true">
      <canvas id="orb-canvas"></canvas>
      <div class="grid-overlay"></div>
      <div class="vignette"></div>
    </div>

    <main class="shell">
      <!-- LEFT: Login card -->
      <section class="card" id="card">
        <div class="logo-row" aria-hidden="true">
          <div class="brand-logo" title="Company">
            <!-- simple mark -->
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 7.5L12 3l9 4.5-9 4.5-9-4.5Zm0 6L12 9l9 4.5-9 4.5-9-4.5Z"/></svg>
          </div>
          <div>
            <div class="product">Company Portal</div>
            <div style="color:#93a7c4; font-size:12px">Secure Access</div>
          </div>
        </div>

        <h1 class="title">Welcome back</h1>
        <p class="subtitle">Sign in to collaborate, track projects, and get work done.</p>

        <!-- Flash from Flask (shows only if a message exists) -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, msg in messages %}
              <div style="margin:10px 0;padding:10px;border-radius:10px;background:rgba(239,68,68,.15);color:#f87171;">
                {{ msg }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <!-- form now posts to Flask -->
        <form id="loginForm" class="form" method="post" action="/login" autocomplete="on">
          <div class="group">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M2.5 7.5A2.5 2.5 0 0 1 5 5h14a2.5 2.5 0 0 1 2.5 2.5v9A2.5 2.5 0 0 1 19 19H5a2.5 2.5 0 0 1-2.5-2.5v-9Zm2 .7 6.9 4.3a2 2 0 0 0 2.2 0L20.5 8.2" fill="none" stroke="#cfe0ff" stroke-width="1.6" stroke-linecap="round"/></svg>
            </span>
            <!-- ADDED name -->
            <input id="email" name="email" class="field" type="email" inputmode="email" placeholder="Work Email" aria-label="Work email" required />
          </div>

          <div class="group">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M6.5 10.5V8a5.5 5.5 0 0 1 11 0v2.5M5 10.5h14v9H5z" fill="none" stroke="#cfe0ff" stroke-width="1.6" stroke-linecap="round"/></svg>
            </span>
            <!-- ADDED name -->
            <input id="password" name="password" class="field" type="password" placeholder="Password" aria-label="Password" minlength="8" required />
            <button type="button" id="peek" class="peek" aria-label="Show password" title="Show password">
              <svg viewBox="0 0 24 24" width="18" height="18"><path d="M1.5 12s4.5-7.5 10.5-7.5S22.5 12 22.5 12 18 19.5 12 19.5 1.5 12 1.5 12Z" fill="none" stroke="#cfe0ff" stroke-width="1.6"/><circle cx="12" cy="12" r="3.5" fill="none" stroke="#cfe0ff" stroke-width="1.6"/></svg>
            </button>
          </div>

          <div class="hint-row">
            <div id="caps" class="caps">Caps Lock is ON</div>
            <div id="emailHint">Use your company email</div>
          </div>
          <div class="strength" aria-hidden="true"><div id="bar" class="bar"></div></div>

          <!-- CTA (hidden until both fields valid) -->
          <div id="ctaWrap" class="cta-wrap">
            <button type="submit" class="cta" id="cta">Sign In</button>
          </div>

          <p class="legal">By continuing you agree to our <a href="#" style="color:#93c5fd; text-decoration:none">Terms</a> and <a href="#" style="color:#93c5fd; text-decoration:none">Privacy Policy</a>.</p>
          <div id="live" class="sr-only" aria-live="polite"></div>
        </form>

        <div class="success-overlay" id="success">
          <div class="check"><svg viewBox="0 0 24 24"><path d="M5 12.5l4 4 10-10"/></svg></div>
        </div>
      </section>

      <!-- RIGHT: 3D hero / brand visual -->
      <aside class="hero" aria-hidden="true">
        <div class="orbit">
          <div class="ring"></div>
          <div class="planet" id="planet"></div>
          <div class="spark"></div>
          <div class="spark"></div>
          <div class="spark"></div>
        </div>
        <div class="hero-copy">
          <h2>Hello Buddy...!</h2>
          <p>Built for the employes of Sayanant Development Services only </p>
          <div class="features">
            <div class="feat"><h3>🛡️ Authorized Use Only</h3><p></p></div>
            <div class="feat"><h3>⚡ Fast, Frictionless Access</h3></div>
            <div class="feat"><h3>🔐 Secure Sign-In</h3</div>
          </div>
        </div>
      </aside>
    </main>

    <script>
      // ===== Utility helpers =====
      const $ = (q, el=document) => el.querySelector(q);
      const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));
      const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

      // ===== Canvas particles background =====
      (function particles(){
        const canvas = document.getElementById('orb-canvas');
        const ctx = canvas.getContext('2d');
        let w, h, dpr, orbs;

        function resize(){
          dpr = Math.min(window.devicePixelRatio || 1, 2);
          w = canvas.width = Math.floor(innerWidth * dpr);
          h = canvas.height = Math.floor(innerHeight * dpr);
          canvas.style.width = innerWidth + 'px';
          canvas.style.height = innerHeight + 'px';
          spawn();
        }

        function spawn(){
          const count = Math.round((w*h) / (1100*1100) * 120) + 60; // scale by area
          orbs = new Array(count).fill(0).map(()=>({
            x: Math.random()*w,
            y: Math.random()*h,
            r: Math.random()*2*dpr + .6,
            vx: (Math.random()-.5) * .25 * dpr,
            vy: (Math.random()-.5) * .25 * dpr,
            h: Math.floor(200 + Math.random()*80)
          }));
        }

        let mx = w/2, my = h/2;
        window.addEventListener('mousemove', e=>{mx = (e.clientX * dpr); my = (e.clientY * dpr)});
        window.addEventListener('scroll', ()=>{ // gentle drift with scroll
          const s = scrollY; orbs.forEach(o=>{o.y += (s%7 - 3) * .02})
        })

        function step(){
          ctx.clearRect(0,0,w,h);
          // glow layer
          ctx.globalCompositeOperation = 'lighter';
          for(const o of orbs){
            o.x += o.vx; o.y += o.vy;
            if(o.x<0||o.x>w) o.vx*=-1; if(o.y<0||o.y>h) o.vy*=-1;
            // slight pull to mouse
            o.vx += (mx - o.x) * 0.000002; o.vy += (my - o.y) * 0.000002;
            const g = ctx.createRadialGradient(o.x,o.y,0,o.x,o.y,o.r*10);
            g.addColorStop(0, `hsla(${o.h}, 100%, 70%, .12)`);
            g.addColorStop(1, 'transparent');
            ctx.fillStyle = g; ctx.beginPath(); ctx.arc(o.x,o.y,o.r*9,0,Math.PI*2); ctx.fill();
          }
          // dots layer
          ctx.globalCompositeOperation = 'source-over';
          ctx.fillStyle = 'rgba(255,255,255,.55)';
          for(const o of orbs){
            ctx.beginPath(); ctx.arc(o.x,o.y,o.r,0,Math.PI*2); ctx.fill();
          }
          requestAnimationFrame(step);
        }
        resize(); step();
        addEventListener('resize', resize);
      })();

      // ===== 3D tilt on the card =====
      (function tilt(){
        const card = document.getElementById('card');
        let rect;
        const updateRect = () => rect = card.getBoundingClientRect(); updateRect();
        addEventListener('resize', updateRect);
        card.addEventListener('pointermove', (e)=>{
          const x = (e.clientX - rect.left) / rect.width;  // 0..1
          const y = (e.clientY - rect.top) / rect.height; // 0..1
          const rx = clamp((.5 - y) * 10, -8, 8);
          const ry = clamp((x - .5) * 14, -12, 12);
          card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
        });
        card.addEventListener('pointerleave', ()=>{
          card.style.transform = 'rotateX(0) rotateY(0)';
        });
      })();

      // ===== Form logic: reveal Sign In only when valid =====
      const email = $('#email');
      const password = $('#password');
      const ctaWrap = $('#ctaWrap');
      const cta = $('#cta');
      const bar = $('#bar');
      const caps = $('#caps');
      const live = $('#live');
      const peek = $('#peek');

      function isEmail(v){
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
      }
      function strengthScore(v){
        let s = 0; if(v.length>=8) s++; if(/[A-Z]/.test(v)) s++; if(/[a-z]/.test(v)) s++; if(/[0-9]/.test(v)) s++; if(/[^A-Za-z0-9]/.test(v)) s++;
        return s; // 0..5
      }
      function renderStrength(){
        const s = strengthScore(password.value);
        const pct = [0,20,40,60,80,100][s];
        bar.style.width = pct + '%';
      }

      function validate(){
        const ok = isEmail(email.value.trim()) && password.value.trim().length>=8;
        ctaWrap.style.display = ok ? 'block' : 'none';
        live.textContent = ok ? 'Sign in available' : 'Enter a valid email and an 8+ character password to continue';
        renderStrength();
      }
      email.addEventListener('input', validate);
      password.addEventListener('input', validate);

      // Caps lock detection
      password.addEventListener('keydown', (e)=>{ caps.style.display = e.getModifierState && e.getModifierState('CapsLock') ? 'block' : 'none' });
      password.addEventListener('keyup', (e)=>{ caps.style.display = e.getModifierState && e.getModifierState('CapsLock') ? 'block' : 'none' });

      // Peek password
      peek.addEventListener('click', ()=>{
        const show = password.getAttribute('type') === 'password';
        password.setAttribute('type', show ? 'text' : 'password');
        peek.setAttribute('aria-label', show ? 'Hide password' : 'Show password');
        peek.title = show ? 'Hide password' : 'Show password';
      });

      // NOTE: Removed the fake preventDefault submit handler so form posts to Flask
      // Initial call
      validate();

      // ===== Scroll reveal for feature cards =====
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(en=>{
          if(en.isIntersecting){ en.target.classList.add('revealed'); io.unobserve(en.target); }
        })
      }, {threshold:.2});
      document.querySelectorAll('.feat').forEach(f=>io.observe(f));

      // ===== Planet color shift with pointer (subtle 3D vibe) =====
      (function planetShift(){
        const planet = document.getElementById('planet');
        window.addEventListener('pointermove', (e)=>{
          const x = e.clientX / innerWidth; const y = e.clientY / innerHeight;
          planet.style.filter = `hue-rotate(${(x*60 - y*30).toFixed(1)}deg) drop-shadow(0 40px 70px rgba(41,89,255,.35))`;
        })
      })();
    </script>
  </body>
</html>
